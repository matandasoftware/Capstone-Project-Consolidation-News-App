{% extends 'news_app/base.html' %}

{% block title %}Editor Dashboard - News App{% endblock %}

{% block content %}
<h2 class="mb-4">Editor Dashboard</h2>

<h3>Pending Articles ({{ pending_articles.count }})</h3>
{% if pending_articles %}
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Publisher</th>
                    <th>Submitted</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for article in pending_articles %}
                <tr>
                    <td>{{ article.title }}</td>
                    <td>{{ article.author.username }}</td>
                    <td>{{ article.publisher|default:"Independent" }}</td>
                    <td>{{ article.created_at|date:"M d, Y" }}</td>
                    <td>
                        <a href="{% url 'article_approve' article.pk %}" class="btn btn-sm btn-success">Review & Approve</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <p>No pending articles.</p>
{% endif %}

<h3 class="mt-5">Recently Approved Articles</h3>
{% if approved_articles %}
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Approved By</th>
                    <th>Approved Date</th>
                </tr>
            </thead>
            <tbody>
                {% for article in approved_articles %}
                <tr>
                    <td>{{ article.title }}</td>
                    <td>{{ article.author.username }}</td>
                    <td>{{ article.approved_by.username }}</td>
                    <td>{{ article.approved_at|date:"M d, Y" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <p>No approved articles yet.</p>
{% endif %}
{% endblock %}
